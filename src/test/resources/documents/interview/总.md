
<details>
<summary>如何处理mq消息堆积？</summary>
<pre><code>
堆积的影响
1、大量消息堆积待处理
2、磁盘占满
3、数据被丢弃(rabbit超时)

堆积的原因
1、消息的爆炸性产生
2、消费能力的下降
    2.1 消费服务器减少
    2.2 业务处理耗时大量延长
    2.3 业务处理异常，无法正常消费

堆积的处理
从生产端看，可以的话，最好做个限流
从消费端看：
1、针对大量消息堆积
    如果消费耗时可接受，慢慢消费即可；否则，可扩展机器则添加机器或者新增临时topic，原消费者转发到临时topic，使用大量的临时topic消费者消费
2、针对磁盘占满
    在新的服务器上，新增临时topic，转移磁盘压力，继续消费
3、针对消息丢失
    不急的话，夜深人静，程序补发消息

最好还是提前防范，做好硬件和消息系统的健康监控
</code></pre>
</details>